<div class="usuarios-container">
  <h2 class="titulo-usuarios">GestiÃ³n de Usuarios</h2>
<div class="accions">

  <!-- ðŸ”½ Filtro por rol -->

      <mat-form-field appearance="outline" class="filter-item dnones">
      <mat-label>Tipo usuario</mat-label>
      <mat-select [(value)]="rolSeleccionado"  (selectionChange)="filtrarPorRol()">
        <mat-option value="Todos">--</mat-option>
        @for (m of roles$ |async; track m) {
        <mat-option [value]="m.idRol">{{ m.nombre }}</mat-option>
        }
      </mat-select>
    </mat-form-field>


<div class="dfmin">
  <!-- ðŸ” Barra de bÃºsqueda -->
  <input 
    type="text" 
    placeholder="Buscar usuario por rol, cÃ©dula, nombre o correo..." 
    [(ngModel)]="filtroTexto"
    (input)="filtrarUsuarios()"
    class="buscador"
  />

  
  <div class="acciones-superiores">
  <button class="btn-agregar" (click)="irAgregarUsuario()">âž• Agregar Usuario</button>
</div>
</div>



</div>
  <table class="tabla-usuarios">
    <thead>
      <tr>
        <th>Rol</th>
        <th class="dnone">CÃ©dula</th>
        <th>Nombre</th>
        <th class="dnone">Correo</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let u of usuariosFiltrados() | paginate: { itemsPerPage: 5, currentPage: paginaActual }; let i = index">

        <td>{{ u.idRolNavigation?.nombre }}</td>
        <td class="dnone">{{ u.cedula }}</td>
        <td>{{ u.nombre }}</td>
        <td class="dnone">{{ u.correo }}</td>
        <td>
          <button class="btn-accion editar" (click)="editarUsuario(u)">Editar</button>
          <button class="btn-accion eliminar" (click)="eliminarUsuario(u.idUsuario!)">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>
  <!-- ðŸ”½ Paginador -->
<pagination-controls 
  (pageChange)="paginaActual = $event"
  previousLabel="Anterior"
  nextLabel="Siguiente"
  class="paginador">
</pagination-controls>

</div>
