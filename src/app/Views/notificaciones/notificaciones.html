<div class="notificaciones-container">
  <h2>Gestión de Notificaciones</h2>

  @if (cargando$ | async) {
    <div class="loading">
      <p>Cargando notificaciones...</p>
    </div>
  }

  @if (!(cargando$ | async) && (notificaciones$ | async)) {
    <table class="tabla-notificaciones">
      <thead>
        <tr>
          <th>Título</th>
          <th>Tipo Notificación</th>
          <th>Mensaje</th>
        </tr>
      </thead>
      <tbody>
        @for (notificacion of (notificaciones$ | async); track notificacion.idNotificacion) {
        <tr 
          (click)="abrirEnlace(notificacion)" 
          [class.no-leida]="!notificacion.leido"
          [class.leida]="notificacion.leido">
          
          <td>{{ notificacion.idTituloNavigation?.titulo1 || 'Sin título' }}</td>
          <td>{{ notificacion.idTipoNotificacionNavigation?.nombre || 'Sin tipo' }}</td>
          <td>{{ notificacion.mensaje || '-' }}</td>
        </tr>
        }
      </tbody>
    </table>
  } @else {
    <div class="no-data">
      <p>No hay notificaciones disponibles.</p>
    </div>
  }
</div>
