<div class="notificaciones-container">
 


<h2>Notificaciones</h2>
  <div *ngIf="cargando$ | async" class="loading">
    <p>Cargando notificaciones...</p>
  </div>

  <div *ngIf="!(cargando$ | async)">
    <table class="tabla-notificaciones" *ngIf="notificaciones.length > 0; else noData">
      <thead>
        <tr>
          <th class="dnones">Título</th>
          <th>Mensaje</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
      @for (notificacion of ((notificaciones$ | async) || []) 
       | paginate: { itemsPerPage: 5, currentPage: paginaActual }; 
       let i = $index; track notificacion.idNotificacion) {

        <!-- Ahora iteramos sobre la porción paginada -->
        <tr 
            [class.no-leida]="!notificacion.leido"
            [class.leida]="notificacion.leido">
          <td  class="dnones" (click)="abrirEnlace(notificacion)">{{ notificacion.idTituloNavigation?.titulo1 || 'Sin título' }}</td>
          <td (click)="abrirEnlace(notificacion)" class="widthMensaje">{{ notificacion.mensaje || '-' }}</td>
          <td>
            <!-- Solo aparece cuando la notificación ya está leída -->
            <button *ngIf="notificacion.leido"
                    (click)="eliminarNotificacion(notificacion.idNotificacion!, $event)"
                    class="btn-eliminar">
              Eliminar
            </button>
          </td>
        </tr>}
      </tbody>
    </table>

<pagination-controls
  (pageChange)="paginaActual = $event"
  previousLabel="Anterior"
  nextLabel="Siguiente"
  class="paginador">
</pagination-controls>
    <ng-template #noData>
      <div class="no-data">
        <p>No hay notificaciones disponibles.</p>
      </div>
    </ng-template>

    <!-- Controles de paginación -->

  </div>
</div>
