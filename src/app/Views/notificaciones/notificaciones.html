<div class="notificaciones-container">
  <h2>Gesti칩n de Notificaciones</h2>

  @if (cargando$ | async) {
    <div class="loading">
      <p>Cargando notificaciones...</p>
    </div>
  }

  @if (!(cargando$ | async) && (notificaciones$ | async)) {
    <table class="tabla-notificaciones">
      <thead>
        <tr>
          <th>T칤tulo</th>
          <th>Tipo Notificaci칩n</th>
          <th>Mensaje</th>
        </tr>
      </thead>
      <tbody>
        @for (notificacion of (notificaciones$ | async); track notificacion.idNotificacion) {
        <tr 
          (click)="abrirEnlace(notificacion)" 
          [class.no-leida]="!notificacion.leido"
          [class.leida]="notificacion.leido">
          
          <td>{{ notificacion.idTituloNavigation?.titulo1 || 'Sin t칤tulo' }}</td>
          <td>{{ notificacion.idTipoNotificacionNavigation?.nombre || 'Sin tipo' }}</td>
          <td>{{ notificacion.mensaje || '-' }}</td>
        </tr>
        }
      </tbody>
    </table>
    <!-- 游댳 Controles de paginaci칩n -->
    <div class="paginacion">
      <button (click)="cambiarPagina(-1)" [disabled]="currentPage === 1">Anterior</button>
      <span>P치gina {{currentPage}} de {{totalPages}}</span>
      <button (click)="cambiarPagina(1)" [disabled]="currentPage === totalPages">Siguiente</button>
    </div>
  } @else {
    <div class="no-data">
      <p>No hay notificaciones disponibles.</p>
    </div>
  }
</div>
